{"title":"","scrolling":true,"loadflow":"var localUserLoaded, localUserReq;\nOF.GA.setAccount('UA-3107048-21', 'spotlight.android.openfeint.com');\nthis.loadScript('dashboard/base');\nthis.loadScript('dashboard/offline');\nif ((typeof jasmine !== \"undefined\" && jasmine !== null) && OF.isBrowser) {\n  this.loadCss('settings/spec');\n}\nlocalUserLoaded = localUserReq = null;\nOF.loadLocalUser = function() {\n  if (OF.user.isLoaded) {\n    return typeof localUserLoaded === \"function\" ? localUserLoaded() : void 0;\n  } else {\n    return localUserReq || (localUserReq = OF.api(\"/xp/users/me\", {\n      success: function(userData) {\n        OF.user = userData.user;\n        OF.user.isLoaded = true;\n        if (typeof localUserLoaded === \"function\") {\n          localUserLoaded();\n        }\n        return localUserLoaded = localUserReq = null;\n      }\n    }));\n  }\n};\nOF.localUserLoaded = function(callback) {\n  if (OF.user.isLoaded) {\n    return callback();\n  } else {\n    return localUserLoaded = callback;\n  }\n};","init":"//load common js for dashboard webview\nthis.loadScript('dashboard/dashboard_model');\n\nOF.loadLocalUser();\n$('body').addClass('textured');\n$('.button').pretouch();\n\n// Base friends page functions\nif (!OF.friendsList) {\n  OF.friendsList = {\n    init: function() {\n      jQuery.lazyLoad({\n        threshold: 0.5,  //percentage of the window height left to scroll that will trigger the next page\n        nextPageLoaded: function(page, data){ \n          if (page == 1) {\n            OF.friendsList.renderFriends(data);                 \n          } else {\n            OF.friendsList.addFriends(data);         \n          }\n        },\n        nextPageShouldLoad: function(page, callback) {\n          OF.api('/xp/friends', {\n            params: {\n              user_id:   OF.page.user.id,\n              page:      page,\n              page_size: 50\n            },\n            success: function(data) {\n              callback(data.users, data.users.length < 50)\n            },\n            failure: function() { callback([]); }\n          });\n        },\n        isFinished: function() { jQuery(\"#loading\").hide(); }\n      });\n    },\n    \n    renderFriendItems: function(friends) {\n      var html = jQuery.map(friends, function(friend) {\n       return tmpl('user_tmpl', friend);\n      });\n      return html;\n    },\n    \n    renderFriends : function(friends) {    \n      if (friends.length > 0) {\n        var html = OF.friendsList.renderFriendItems(friends);\n        jQuery('#friends_list_container').html(html.join('')).unhide();\n        jQuery(\"#friends_list .no_data\").hide();\n      } else {\n        jQuery('#friends_list_container').hide();\n        jQuery(\"#friends_list .no_data\").unhide();\n      }\n    },\n    \n    addFriends : function(friends) {    \n      var html = OF.friendsList.renderFriendItems(friends);\n      jQuery('#friends_list_container').append(html.join(''));\n    }\n  };\n}\nthis.requireCss('dashboard/profile', ['webui', 'webui3']);\nthis.loadScript('dashboard/profile');\nwindow.profilePage = new ProfilePage(this);","resume":"window.profilePage.updateUserInfo()","appear":"var backToHome = function() {\n  var stack = OF.pageStackController.activeStack;\n  var rootPage = stack.pages[0];\n  // friends profile page has same url as my profile page, use !stack.activePage.params['user_id'] to confirm it's my profile page\n  if (stack.activePage.url.match(rootPage.url) && !stack.activePage.params['user_id']) {\n    OF.refresh()\n  } else {\n    OF.goBack({root:true});\n  }  \n}\n// Menu handling functions\nvar menuControl = OF.menuControl;\nmenuControl.enableMenuItems('home', 'settings', 'exit');\nmenuControl.initialize();\nmenuControl.setup('home', backToHome);\nmenuControl.setup('settings', function() {\n  OF.action('openSettings');\n});\nmenuControl.setup('exit', function() {\n  OF.action('dismiss');\n});\n\n// Go home on touching the logo area\n$('#home_button').touch(backToHome);\n\n$('#header .title').html(OF.page.title);","disappear":null,"exit":null,"html":"<div id='dashboard'>\n<div id='header'>\n<span class='loading'>\n<span class='spinner'></span>\n</span>\n<div class='title' id='home_button'></div>\n</div>\n          <script type=\"text/plain\" id=\"message_tmpl\">\n            <li class=\"message <%=className()%>\">\n  <div class=\"message_wrapper\">\n    <div class=\"left_column\" data-href=\"<%=profileUrl()%>\">\n      <div class=\"small_profile_picture\" style=\"<%=style()%>\">\n        <div class=\"overlay\"></div>\n      </div>\n    </div>\n    <div class=\"right_column message_action\">\n      <div class=\"delete_message badge_button\">\n        <div class=\"icon_container\">&nbsp;</div>\n      </div>\n    </div>\n    <div class=\"center_column\" data-id=\"<%=id%>\">\n      <p class=\"username\" data-userid=\"<%=user_id%>\" data-href=\"<%=profileUrl()%>\">\n        <%=user_name%>\n      </p>\n      <p class=\"detail\">\n        <%=message()%>\n      </p>\n      <p class=\"post_date\">\n        posted on\n        <time><%=created_at%></time>\n      </p>\n    </div>\n  </div>\n</li>\n          </script>\n          <script type=\"text/plain\" id=\"share_message_tmpl\">\n            <li class=\"message share_message <%=className()%>\" data-sndid=\"<%=social_notification_definition_id%>\" data-snid=\"<%=social_notification_id%>\">\n  <div class=\"message_wrapper\">\n    <div class=\"left_column\" data-userid=\"<%=user_id%>\" data-href=\"<%=profileUrl()%>\">\n      <div class=\"small_profile_picture\" style=\"<%=style()%>\">\n        <div class=\"overlay\"></div>\n      </div>\n    </div>\n    <div class=\"right_column message_action\">\n      <div class=\"delete_message badge_button\">\n        <div class=\"icon_container\">&nbsp;</div>\n      </div>\n    </div>\n    <div class=\"center_column\" data-id=\"<%=id%>\">\n      <p class=\"username\" data-userid=\"<%=user_id%>\" data-href=\"<%=profileUrl()%>\">\n        <%=user_name%>\n      </p>\n      <div class=\"share_detail stretch_bubble_container <%=detailClassName()%>\">\n        <div class=\"detail_wrapper stretch_bubble_center\">\n          <div class=\"detail stretch_bubble_content\">\n            <%=message()%>\n          </div>\n        </div>\n      </div>\n      <div class=\"game_notification\">\n        <div class=\"left_column\">\n          <div class=\"game_picture\" style=\"<%=gameUrl()%>\" data-packageidentifier=\"<%=package_identifier%>\" data-id=\"<%=game_id%>\"><%=game_name%></div>\n        </div>  \n        <div class=\"center_column developer_message\">\n            <%=developer_message%>\n        </div>\n      </div>\n      <p class=\"post_date\">\n        <time><%=created_at%> </time>\n        via&nbsp;\n        <span class=\"game_name\"  data-packageidentifier=\"<%=package_identifier%>\" data-id=\"<%=game_id%>\"><%=game_name%></span>\n      </p>\n    </div>\n  </div>\n</li>\n          </script>\n          <script type=\"text/plain\" id=\"pageUser_tmpl\">\n            <div class=\"user_basic\">\n  <div class=\"user_name\"><%=name%></div>\n  <div class=\"user_score_container\">\n    <div class=\"user_score\"><%=gamer_score%></div>\n  </div>\n  <div id=\"setting_icon\" class=\"setting_icon\"></div>\n</div>\n<div class=\"user_info\">\n  <div class=\"avatar\" style=\"<%=style()%>\">\n    <div class=\"overlay\"></div>\n  </div>\n  <div class=\"status_container bubble <%=statusClassName()%>\">\n    <div class=\"status\" id=\"status\"><%=userStatus()%></div>\n    <div class=\"update_status hidden\" id=\"update_status\">\n      Update Status\n    </div>\n  </div>\n</div>\n          </script>\n          <script type=\"text/plain\" id=\"gameFriend_tmpl\">\n            <li class=\"games\" id=\"games\">\n  <div class=\"badge_button button_container\">\n    <div class=\"icon\"></div>\n    <div class=\"subtitle\"><%=gameTitle()%></div>\n  </div>\n</li>\n<li class=\"friends\" id=\"friends\">\n  <div class=\"badge_button button_container\">\n    <div class=\"icon\"></div>\n    <div class=\"subtitle\"><%=friendTitle()%></div>\n    <div class=\"badge hidden\" id=\"pending_friends\"><%=pendingFriend()%></div>\n  </div>\n</li>\n          </script>\n<div class='profile_page' id='user_profile'>\n<div class='user' id='info_cell'></div>\n<div id='friend_action_container'>\n<div class='add_friend friend_action' id='add_friend'>\n<div class='action_button'>\n<div class='message'>\nAdd Friend\n</div>\n</div>\n<div class='action_info'>\n<div class='action_info_inner'>\nAdd\n<span class='user_name'></span>\nas a friend!\n</div>\n</div>\n</div>\n<div class='invite_play friend_action' id='invite_play'>\n<div class='action_button'>\n<div class='message'>\nInvite to Play!\n</div>\n</div>\n<div class='action_info'>\n<div class='action_info_inner'>\n<span class='user_name'></span>\ndoesn't play\n<span class='game_name'></span>\n</div>\n</div>\n</div>\n<div class='pending_friend friend_action' id='pending_friend'>\n<div class='action_button disabled'>\nPending...\n</div>\n<div class='action_info'>\n<div class='action_info_inner'>\nWaiting for\n<span class='user_name'></span>\nto accept your request.\n</div>\n</div>\n</div>\n<div class='unblock_user friend_action' id='unblock_user'>\n<div class='action_button'>\nUnblock User\n</div>\n<div class='action_info'>\n<div class='action_info_inner'>\nThis user is currently blocked\n</div>\n</div>\n</div>\n</div>\n<ul class='game_friend' id='game_friend'>\n<li class='games' id='games'>\n<div class='badge_button button_container'>\n<div class='icon'></div>\n<div class='subtitle'></div>\n</div>\n</li>\n<li class='friends' id='friends'>\n<div class='badge_button button_container'>\n<div class='icon'></div>\n<div class='subtitle'></div>\n<div class='badge hidden' id='pending_friends'></div>\n</div>\n</li>\n</ul>\n<ul class='cells wall'>\n<h4 class='section_title'>\nWall\n</h4>\n<li class='action_container hidden' id='set_your_name'>\n<div class='action_button has_maxwidth' id='set_name'>\n<span>\nSet Your Feint Name to Comment\n</span>\n</div>\n</li>\n<li class='no_access_wall hidden' id='blocked_on_wall'>\nThis user has made this wall private.\n</li>\n<li class='no_access_wall hidden' id='friend_only_wall'>\n<span class='user_name'></span>\nonly share's their wall with their friends. Add them as a friend to comment.\n</li>\n<li class='no_access_wall hidden' id='view_only_wall'>\n<span class='user_name'></span>\nonly allows friends to post on the wall. Add them as a friend to post on it.\n</li>\n<li class='action_container hidden' id='post_message'>\n<form>\n<div class='text_field'>\n<textarea class='input_area' id='new_message' maxlength='400'></textarea>\n</div>\n<div class='action_button has_maxwidth' id='post'>\n<span>\nPost Comment\n</span>\n</div>\n</form>\n</li>\n<li class='messages_wrapper'>\n<ul class='messages_container column3_lrfixed' id='messages_container'></ul>\n</li>\n<li class='load_more hidden' id='load_more'>\nLoad More\n</li>\n</ul>\n<div class='more_options hidden' id='more_options'>\n<h4 class='more_title' id='more_title'>\nMore Options\n</h4>\n<ul class='more_action hidden'>\n<li class='remove_friend hidden' id='remove_friend'>\n<div class='badge_button button_container'>\n<div class='icon'></div>\n<div class='subtitle'>\nRemove Friend\n</div>\n</div>\n</li>\n<li class='block_user hidden' id='block_user'>\n<div class='badge_button button_container'>\n<div class='icon'></div>\n<div class='subtitle'>\nBlock User\n</div>\n</div>\n</li>\n<li class='report_user' id='report_user'>\n<div class='badge_button button_container'>\n<div class='icon'></div>\n<div class='subtitle'>\nReport User\n</div>\n</div>\n</li>\n</ul>\n</div>\n</div>\n\n</div>\n"}